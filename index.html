<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>

<link rel="manifest" href="manifest.json">

<script>
if ("serviceWorker" in navigator) {
 navigator.serviceWorker.register("./service-worker.js");
}
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… â€” Ø­ÙØµ</title>

<style>
body{
 margin:0;
 background:#0b1220;
 color:#fff;
 font-family:system-ui;
 transition:.4s;
}

/* ÙˆØ¶Ø¹ ÙØ§ØªØ­ */
body.light{
 background:#f5f7fb;
 color:#111;
}
body.light header{background:#e5e7eb;color:#111}
body.light .ayah-box{background:#fff}
body.light .search input{background:#fff;color:#111}
body.light .drawer{background:#f1f5f9}

/* HEADER */
header{
 background:#0f172a;
 padding:8px;
 text-align:center;
 font-weight:bold;
 font-size:14px;
}

/* SEARCH */
.search{text-align:center;padding:6px;}
.search input{
 width:80%;
 padding:7px;
 border-radius:12px;
 border:none;
 background:#020617;
 color:#fff;
 font-size:13px;
}

/* AYAH */
.ayah-box{
 margin:6px;
 padding:8px;
 border-radius:12px;
 background:#111827;
 text-align:center;
 font-size:14px;
}

/* VIEWER */
.viewer{
 display:flex;
 justify-content:center;
 padding:8px;
 max-height:70vh;
}
.viewer.fit img{width:100%;}
img{
 max-width:100%;
 border-radius:14px;
 background:#fff;
 transition:.4s;
}

/* SIDE ARROWS */
.side{
 position:fixed;
 top:50%;
 transform:translateY(-50%);
 background:linear-gradient(145deg,#e5e7eb,#9ca3af);
 color:#111;
 border:none;
 padding:6px 7px;
 border-radius:50%;
 font-size:11px;
 box-shadow:0 0 8px rgba(255,255,255,.6);
 z-index:5;
}
.left{left:5px;}
.right{right:5px;}

/* NAV */
.nav{
 display:flex;
 gap:6px;
 padding:6px;
}
.nav button{
 flex:1;
 padding:6px;
 border:none;
 border-radius:12px;
 font-size:12px;
 background:linear-gradient(145deg,#e5e7eb,#9ca3af);
 color:#111;
 box-shadow:0 0 6px rgba(255,255,255,.5);
 animation:pulse 5s infinite;
}

/* ØªØ£Ø«ÙŠØ± Ù‡Ø§Ø¯Ø¦ */
@keyframes pulse{
 0%{filter:hue-rotate(0deg)}
 50%{filter:hue-rotate(30deg)}
 100%{filter:hue-rotate(0deg)}
}

/* DRAWER */
.drawer{
 position:fixed;
 top:0;
 right:-200px;
 width:190px;
 height:100%;
 background:#020617;
 transition:.3s;
 padding:8px;
 overflow:auto;
 z-index:10;
}
.drawer.open{right:0;}

.page-row{
 display:flex;
 gap:4px;
 margin-bottom:4px;
}
.page-row button{
 padding:5px;
 border:none;
 border-radius:8px;
 background:#1f2933;
 color:#fff;
 font-size:11px;
}

/* TOAST */
.toast{
 position:fixed;
 bottom:20px;
 left:50%;
 transform:translateX(-50%);
 background:#111827;
 padding:10px 14px;
 border-radius:12px;
 display:none;
 font-size:13px;
}
  /* Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù†Øµ */
.ayah-box{
 animation:textGlow 6s infinite alternate;
}

/* Ø¥Ø·Ø§Ø± Ø§Ù„Ù…ØµØ­Ù */
img{
 animation:frameGlow 12s infinite alternate;
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Øµ */
@keyframes textGlow{
 0%{text-shadow:0 0 6px #ffd700}
 50%{text-shadow:0 0 10px #00ffff}
 100%{text-shadow:0 0 6px #ffd700}
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥Ø·Ø§Ø± */
@keyframes frameGlow{
 0%{filter:hue-rotate(0deg)}
 50%{filter:hue-rotate(40deg)}
 100%{filter:hue-rotate(0deg)}
}
  
.full img{
 animation:frameGlow 8s infinite alternate;
}

.full .ayah-box{
 animation:textGlow 4s infinite alternate;
}
  
/* FULL */
.full header,.full .search,.full .ayah-box,.full .nav{display:none}
.full .viewer{max-height:100vh}
  .full .side,
.full .nav,
.full header,
.full .search,
.full .ayah-box{
 display:none !important;
}

.full .viewer{
 max-height:100vh;
 width:100vw;
 padding:0;
}

.full img{
 max-height:100vh;
 width:auto;
}
</style>
</head>

<body>

<header>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… â€” Ø­ÙØµ</header>

<div class="search">
 <input id="search" placeholder="Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø©">
</div>

<div class="ayah-box" id="ayah"></div>

<div class="viewer" id="viewer">
 <img id="img">
</div>

<!-- Ø§Ù„Ø£Ø³Ù‡Ù… -->
<button class="side left" onclick="prev()">â®</button>
<button class="side right" onclick="next()">â¯</button>

<div class="nav">
 <button onclick="toggleDrawer()">â˜°</button>
 <button onclick="toggleFull()">â¤¢</button>
 <button onclick="toggleMode()">â—</button>
</div>

<div class="nav">
 <input type="time" id="alarm" style="flex:1;padding:6px;border-radius:10px;border:none;font-size:12px">
 <button onclick="setAlarm()">â°</button>
</div>

<div class="drawer" id="drawer"></div>
<div class="toast" id="toast"></div>

<!-- Ù…Ù„Ù Ø§Ù„ØµÙˆØª Ù…Ù† Ø§Ù„Ø¬Ø°Ø± -->
<audio id="ring" src="alarm.mp3"></audio>

<script>
const TOTAL=604;
let page=parseInt(localStorage.page||1);
let full=false;
let fit=false;
let sx;

const img=document.getElementById("img");
const viewer=document.getElementById("viewer");
const drawer=document.getElementById("drawer");
const ring=document.getElementById("ring");
const toast=document.getElementById("toast");

/* LOAD */
function load(){
 img.src=page+".png";
 localStorage.page=page;
}
load();

/* ØªÙ†Ù‚Ù„ */
function prev(){if(page>1){page--;load();}}
function next(){if(page<TOTAL){page++;load();}}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
if(localStorage.mode=="light")
 document.body.classList.add("light");

function toggleMode(){
 document.body.classList.toggle("light");
 localStorage.mode=
 document.body.classList.contains("light")?"light":"dark";
}

/* Ø¯Ø±Ø¬ Ø§Ù„ÙÙ‡Ø±Ø³ */
function toggleDrawer(){
 drawer.classList.toggle("open");
}

/* Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙ‡Ø±Ø³ */
for(let i=1;i<=TOTAL;i++){
 let row=document.createElement("div");
 row.className="page-row";

 let b=document.createElement("button");
 b.textContent=i;
 b.style.flex="1";
 b.onclick=()=>{page=i;load();drawer.classList.remove("open");};

 let s=document.createElement("button");
 s.textContent="â˜…";
 s.style.width="26px";
 s.onclick=()=>{
  localStorage["fav"+i]=true;
  showToast("ØªÙ… Ø­ÙØ¸ "+i);
 };

 row.append(b,s);
 drawer.appendChild(row);
}

/* Ø§Ù„Ø¨Ø­Ø« */
search.onchange=()=>{
 let n=parseInt(search.value);
 if(n>=1 && n<=TOTAL){page=n;load();}
};

/* Ø§Ù„Ø³Ø­Ø¨ */
img.addEventListener("touchstart",e=>{
 sx=e.touches[0].clientX;
});
img.addEventListener("touchend",e=>{
 let dx=e.changedTouches[0].clientX-sx;
 if(dx>80) next();
 if(dx<-80) prev();
});

/* Ø§Ù„Ù†Ù‚Ø± Ù…Ø±ØªÙŠÙ† Ù„Ù„ØªÙƒØ¨ÙŠØ± */
let lastTap = 0;
let scale = 1;

/* Ø¯Ø§Ù„Ø© Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
function toggleFullscreen(){
 if(!document.fullscreenElement){
  document.body.classList.add("full");
  document.documentElement.requestFullscreen();
 }else{
  document.body.classList.remove("full");
  document.exitFullscreen();
 }
}

/* Ù…Ø§ÙˆØ³ */
img.addEventListener("dblclick",toggleFullscreen);

/* Ù„Ù…Ø³ */
img.addEventListener("touchend",e=>{
 let now = Date.now();
 if(now - lastTap < 300){
  toggleFullscreen();
 }
 lastTap = now;
});

/* ØªÙƒØ¨ÙŠØ± ÙˆØªØµØºÙŠØ± Ø¨Ø§Ù„Ù„Ù…Ø³ Ø¯Ø§Ø®Ù„ fullscreen */
img.addEventListener("wheel",e=>{
 if(!document.fullscreenElement) return;
 e.preventDefault();
 scale += e.deltaY * -0.001;
 scale = Math.min(Math.max(.8,scale),3);
 img.style.transform=`scale(${scale})`;
});

/* Ù„Ù…Ø³ Ø¨Ø¥ØµØ¨Ø¹ÙŠÙ† (pinch zoom) */
let startDist=0;

img.addEventListener("touchstart",e=>{
 if(e.touches.length==2){
  startDist=Math.hypot(
   e.touches[0].pageX-e.touches[1].pageX,
   e.touches[0].pageY-e.touches[1].pageY
  );
 }
});

img.addEventListener("touchmove",e=>{
 if(e.touches.length==2 && document.fullscreenElement){
  let newDist=Math.hypot(
   e.touches[0].pageX-e.touches[1].pageX,
   e.touches[0].pageY-e.touches[1].pageY
  );
  scale*=newDist/startDist;
  scale=Math.min(Math.max(.8,scale),3);
  img.style.transform=`scale(${scale})`;
  startDist=newDist;
 }
});
  

/* Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
function toggleFull(){
 if(!full){
  document.body.classList.add("full");
  document.documentElement.requestFullscreen();
  full=true;
 }else{
  document.body.classList.remove("full");
  document.exitFullscreen();
  full=false;
 }
}

/* Ø¢ÙŠØ§Øª */
const ayat=[
 "Ù‚ÙÙ„Ù’ Ø¥ÙÙ†Ù‘ÙÙ…ÙØ§ Ø£ÙÙ…ÙØ±Ù’ØªÙ Ø£ÙÙ†Ù’ Ø£ÙØ¹Ù’Ø¨ÙØ¯Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù",
 "ÙƒÙÙ†Ù’ØªÙÙ…Ù’ Ø®ÙÙŠÙ’Ø±Ù Ø£ÙÙ…Ù‘ÙØ©Ù",
 "ÙˆÙÙ„ÙÙ†ÙØ§ Ø£ÙØ¹Ù’Ù…ÙØ§Ù„ÙÙ†ÙØ§",
 "Ø¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§",
 "ÙˆÙÙ‚ÙÙ„Ù’ Ø±ÙØ¨Ù‘Ù Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§"
];
let ai=0;
function rotate(){
 ayah.textContent=ayat[ai%ayat.length];
 ai++;
}
rotate();
setInterval(rotate,15000);

/* Ø§Ù„Ù…Ù†Ø¨Ù‡ */
function setAlarm(){
 localStorage.alarm=alarm.value;
 showToast("ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ù…Ù†Ø¨Ù‡");
}
setInterval(()=>{
 let t=localStorage.alarm;
 if(!t)return;

 let n=new Date();
 let cur=n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0");

 if(cur==t){
  ring.play();
  showToast("ğŸ“– "+ayat[Math.floor(Math.random()*ayat.length)]);
  localStorage.alarm="";
 }
},60000);

/* ØªÙ†Ø¨ÙŠÙ‡ */
function showToast(msg){
 toast.textContent=msg;
 toast.style.display="block";
 setTimeout(()=>toast.style.display="none",3500);
}
</script>

</body>
</html>